{% extends "layout.html" %}
{% block title %}Facilities{% endblock %}

{% block content %}

<h2 class="text-2xl font-semibold mb-4">All Facilities</h2>
<div class="mb-6">
    <input type="text" id="facilitySearch" oninput="filterFacilities(this.value)"
           placeholder="Search facilities..."
           class="w-full px-4 py-2 border rounded shadow-sm text-sm focus:outline-none focus:ring focus:border-blue-300">
  </div>
  

<div id="facilityGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {% for fac in facilities %}
    <div class="facility-card group border rounded bg-white hover:bg-gray-50 p-4 relative">
        <a href="{{ url_for('dashboard.facility_profile', facility_id=fac.id) }}">
          <h3 class="text-lg font-semibold text-blue-700">{{ fac.name }}</h3>
          <p class="text-sm text-gray-600">{{ fac.location }}</p>
        </a>
      
        <!-- Tooltip -->
        <div class="absolute left-0 top-full mt-2 w-64 bg-white border rounded shadow p-3 text-sm z-10 hidden group-hover:block">
          <p><strong>PACS:</strong> {{ fac.pacs or '—' }}</p>
          <p><strong>Modalities:</strong> {{ fac.modalities_assignment_period or '—' }}</p>
          <p><strong>TAT:</strong> {{ fac.tat_definition or '—' }}</p>
          <p><strong>Status:</strong>
            {% if fac.active_status %}
              <span class="text-green-600 font-medium">Active</span>
            {% else %}
              <span class="text-red-600 font-medium">Inactive</span>
            {% endif %}
          </p>
        </div>
      </div>
      
    {% endfor %}
  </div>
  

<script>
    function filterFacilities(query) {
      const items = document.querySelectorAll('.facility-card');
      const q = query.toLowerCase();
    
      items.forEach(item => {
        const text = item.innerText.toLowerCase();
        item.style.display = text.includes(q) ? '' : 'none';
      });
    }
    </script>
    
{% endblock %}
