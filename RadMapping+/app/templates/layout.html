<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}RadMapping+{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body class="bg-gray-100 text-gray-800 overflow-x-hidden {% if request.endpoint == 'landing.landing' %}overflow-y-hidden{% endif %}">

<!-- âœ… Full-screen Background Wrapper (only for landing page) -->
{% if request.endpoint == 'landing.landing' %}
<div class="dashboard-container relative overflow-hidden min-h-screen">
  <!-- ðŸ”µ Animated Particles -->
  <div class="background-particles pointer-events-none absolute inset-0 z-0">
    <div class="particle" style="--delay: 0s; --x: 10%; --y: 20%;"></div>
    <div class="particle" style="--delay: 0.5s; --x: 80%; --y: 10%;"></div>
    <div class="particle" style="--delay: 1s; --x: 20%; --y: 80%;"></div>
    <div class="particle" style="--delay: 1.5s; --x: 90%; --y: 60%;"></div>
    <div class="particle" style="--delay: 2s; --x: 50%; --y: 30%;"></div>
    <div class="particle" style="--delay: 2.5s; --x: 70%; --y: 90%;"></div>
    <div class="particle" style="--delay: 3s; --x: 30%; --y: 50%;"></div>
    <div class="particle" style="--delay: 3.5s; --x: 60%; --y: 70%;"></div>
  </div>

  <!-- ðŸŸ£ Gradient Orbs -->
  <div class="gradient-orb orb-1"></div>
  <div class="gradient-orb orb-2"></div>
{% endif %}

  <!-- âœ… Foreground Page Content -->
  <div class="relative z-10 {% if request.endpoint == 'landing.landing' %}h-screen flex flex-col{% endif %}">
    {% if session.user and request.endpoint != 'auth.login' %}
    <!-- âœ… NAVIGATION HEADER -->
    <nav class="bg-white border-b border-gray-200 {% if request.endpoint == 'landing.landing' %}flex-shrink-0{% endif %}">
      <div class="max-w-10xl mx-auto px-4">
        <div class="flex h-16 items-center justify-between">
          <div class="flex-shrink-0">
            <a href="{{ url_for('landing.landing') }}" class="text-lg font-medium text-blue-600">
              RadMapping+
            </a>
          </div>
          <div class="hidden md:flex items-center space-x-6">
            {% set routes = {
              'daily.daily': 'Daily Schedule',
              'monthly.monthly': 'Monthly Schedule',
              'shifts.shifts': 'Capacity',
              'doctors.doctor_list': 'Doctors',
              'facilities.facilities': 'Facilities',
              'specialties.specialties': 'Specialties',
              'licenses.licenses_page': 'Licenses',
              'vacations.vacations_page': 'Vacations',
              'info.info': 'Information',
              'contacts.contacts': 'Contacts'
            } %}
            {% for endpoint, label in routes.items() %}
            <a href="{{ url_for(endpoint) }}"
               class="px-2 py-2 text-sm font-medium {% if request.endpoint == endpoint %}text-blue-600 border-b-2 border-blue-600{% else %}text-gray-500 hover:text-blue-600 hover:border-b-2 hover:border-blue-600{% endif %}">
              {{ label }}
            </a>
            {% endfor %}
          </div>
          <div class="flex-shrink-0">
            <a href="{{ url_for('auth.logout') }}" class="text-sm font-medium text-red-500 hover:text-blue-600">Logout</a>
          </div>
        </div>
      </div>
    </nav>
    {% endif %}

    {% if request.endpoint == 'auth.login' %}
      {% block login_content %}{% endblock %}
    {% else %}
      <!-- Single content block with conditional wrappers -->
      {% if request.endpoint == 'landing.landing' %}
        <div class="flex-1 overflow-hidden">
      {% else %}
        <div class="max-w-10xl mx-auto p-6 bg-white rounded shadow">
      {% endif %}
          {% block content %}{% endblock %}
        </div>
    {% endif %}

    {% if session.user %}
      {% include 'chatbot.html' %}
    {% endif %}
  </div>

{% if request.endpoint == 'landing.landing' %}
</div>
{% endif %}

</body>
</html>